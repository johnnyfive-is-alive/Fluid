{% extends 'base.html' %}
{% block content %}
<!-- Header with add button -->
<div class="d-flex justify-content-between align-items-center mb-3">
<h2>Item Types</h2>
<a href="{{ url_for('itemtypes.add_form') }}" class="btn btn-primary">
<i class="bi bi-plus"></i> Add New Type
</a>
</div>

<!-- Item types table -->
<div class="table-responsive">
<table class="table table-striped table-hover">
<thead class="table-dark">
<tr>
<th>ID</th>
<th>Type Name</th>
<th>Items Count</th>
<th>Actions</th>
</tr>
</thead>
<tbody>
{% if itemtypes %}
{% for it in itemtypes %}
<tr>
<td>{{ it['id'] }}</td>
<td><strong>{{ it['typename'] }}</strong></td>
<td>
<span class="badge bg-secondary">{{ it['item_count'] }}</span>
</td>
<td>
<!-- Edit button -->
<a href="{{ url_for('itemtypes.edit_form', id=it['id']) }}" 
   class="btn btn-sm btn-outline-primary">Edit</a>
<!-- Delete button with confirmation -->
<form method="post" action="{{ url_for('itemtypes.delete_type', id=it['id']) }}" 
      style="display:inline;"
      onsubmit="return confirm('Delete type \'{{ it['typename'] }}\'? This will fail if items are using this type.');">
<button type="submit" class="btn btn-sm btn-outline-danger">Delete</button>
</form>
</td>
</tr>
{% endfor %}
{% else %}
<tr>
<td colspan="4" class="text-center text-muted">No item types found. Add one to get started!</td>
</tr>
{% endif %}
</tbody>
</table>
</div>

<!-- Helpful info card -->
<div class="card mt-4">
<div class="card-body">
<h5 class="card-title">About Item Types</h5>
<p class="card-text">
Item types categorize your items (e.g., STATION, RESOURCE, UNIT). 
Each item must be assigned to a type. You cannot delete a type if items are still using it.
</p>
</div>
</div>
{% endblock %}